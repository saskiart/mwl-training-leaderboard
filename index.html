<!DOCTYPE html>
<html>
<head>
    <title>MANAGING WITHIN THE LAW - US GAME SHOW EDITION</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        
        :root {
            --host-blue: #2d6898;
            --host-orange: #e67e22;
            --block-text: #1A1A1A;
            --gradient-primary: linear-gradient(135deg, var(--host-blue), #1a4b6e);
            --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.15);
        }

        /* All previous styles remain the same */
        /* [Previous CSS content] */
    </style>
</head>
<body>
    <div class="page-wrapper">
        <!-- Decorative Elements -->
        <div class="decorative-corner corner-left"></div>
        <div class="decorative-corner corner-right"></div>
        
        <!-- Fixed Sparkles -->
        <div class="sparkle sparkle-1 gold"></div>
        <div class="sparkle sparkle-2 blue"></div>
        <div class="sparkle sparkle-3 orange"></div>
        <div class="sparkle sparkle-4 blue"></div>
        <div class="sparkle sparkle-5 gold"></div>
        <div class="sparkle sparkle-6 orange"></div>
        
        <!-- Additional Sparkles -->
        <div class="sparkle sparkle-7 blue"></div>
        <div class="sparkle sparkle-8 gold"></div>
        <div class="sparkle sparkle-9 orange"></div>
        <div class="sparkle sparkle-10 blue"></div>
        <div class="sparkle sparkle-11 gold"></div>
        <div class="sparkle sparkle-12 orange"></div>

        <!-- Sound Effect -->
        <audio id="submitSound" src="https://assets.mixkit.co/active_storage/sfx/2571/2571-preview.mp3"></audio>
        <div class="confetti-container"></div>

        <!-- Block Logo and Admin -->
        <div class="fixed-elements">
            <img src="images/block-lockup_black-on-white.jpg" alt="Block Logo" class="block-logo">
            <button onclick="toggleAdminPanel()" class="admin-toggle-btn">
                <span>‚öôÔ∏è</span>
                <span>Admin</span>
            </button>
        </div>

        <!-- Modal Backdrop -->
        <div id="modalBackdrop" class="modal-backdrop"></div>

        <!-- Admin Panel -->
        <div id="adminPanel" class="admin-panel">
            <div class="admin-header">
                <h3>Admin Controls</h3>
                <button onclick="toggleAdminPanel()" class="close-btn">√ó</button>
            </div>
            <div class="admin-content">
                <div class="admin-section">
                    <h4>Reset Controls</h4>
                    <button onclick="confirmResetAll()" class="danger-btn">Reset All Scores</button>
                    <select id="resetCategorySelect">
                        <option value="">Select Category to Reset</option>
                        <option value="hiring">üë• Hiring</option>
                        <option value="wage">üí∞ Wage & Hour</option>
                        <option value="performance">üìä Performance Management</option>
                        <option value="terminations">üìù Terminations</option>
                        <option value="claims">‚öñÔ∏è Common Claims</option>
                        <option value="policies">üìú Key Policies</option>
                    </select>
                    <button onclick="confirmResetCategory()" class="warning-btn">Reset Selected Category</button>
                </div>
            </div>
        </div>

        <!-- Main Title -->
        <div class="main-header spotlight-effect">
            <div class="title-decorations">
                <div class="title-decoration decoration-left"></div>
                <div class="title-decoration decoration-right"></div>
                <div class="title-stars star-1">‚ú¶</div>
                <div class="title-stars star-2">‚ú¶</div>
                <div class="title-stars star-3">‚ú¶</div>
                <div class="title-stars star-4">‚ú¶</div>
            </div>
            <div class="title-wrapper">
                <h1>MANAGING WITHIN THE LAW</h1>
                <h2>GAME SHOW EDITION</h2>
                <div class="subtitle">LEADERBOARD</div>
            </div>
        </div>

        <!-- Host Section -->
        <div class="host-section">
            <div class="host-wrapper spotlight-effect">
                <div class="host-content">
                    <div class="host-image">
                        <img src="images/Game Show Host with Blue Board.png" alt="Game Show Host">
                    </div>
                    <div class="host-message">
                        <h3>Welcome to the Legal Challenge!</h3>
                        <p>Test your knowledge for a chance to earn üèÜ top rankings</p>
                        <div class="host-message-details">
                            <p>üéØ Master key legal concepts</p>
                            <p>üìö Learn as you go ‚Äî every question's a chance to grow</p>
                            <p>üéâ Celebrate your progress and cheer on your peers</p>
                        </div>
                    </div>
                    <img src="images/ChatGPT Image Apr 29, 2025, 10_23_35 PM.png" alt="Game Show Contestants" class="contestants-image">
                </div>
            </div>
        </div>

        <!-- Three Panel Layout -->
        <div class="three-panel-layout">
            <!-- How to Play -->
            <div class="rules-section">
                <div class="category-header">
                    <h3>
                        <span class="category-icon">üìã</span>
                        How to Play
                    </h3>
                </div>
                <ol>
                    <li>Complete each category quiz to test your knowledge.</li>
                    <li>Your score for each category will be based on correct answers.</li>
                    <li>Submit your scores using the Score Entry Panel.</li>
                    <li>Compete in all categories to maximize your overall ranking.</li>
                </ol>
            </div>

            <!-- Score Entry -->
            <div class="score-entry-panel">
                <h3>
                    <span class="category-icon">‚úèÔ∏è</span>
                    Update Score
                </h3>
                <div class="score-form">
                    <select id="categorySelect">
                        <option value="overall">Overall Leaderboard</option>
                        <option value="hiring">üë• Hiring</option>
                        <option value="wage">üí∞ Wage & Hour</option>
                        <option value="performance">üìä Performance Management</option>
                        <option value="terminations">üìù Terminations</option>
                        <option value="claims">‚öñÔ∏è Common Claims</option>
                        <option value="policies">üìú Key Policies</option>
                    </select>
                    <input type="text" id="playerName" placeholder="Your Name">
                    <input type="number" id="score" placeholder="Score">
                    <input type="text" id="time" placeholder="Time (Optional)">
                    <button onclick="addScore()">Add Score</button>
                </div>
            </div>
        </div>

        <!-- Center Content -->
        <div class="center-content">
            <!-- Leaderboard -->
            <div class="leaderboard">
                <div class="leaderboard-header">
                    <h3>
                        <span class="category-icon">üèÜ</span>
                        Leaderboard
                    </h3>
                </div>
                <table class="category-table">
                    <thead>
                        <tr>
                            <th>Rank</th>
                            <th>Player</th>
                            <th>Total Score</th>
                            <th>Categories Completed</th>
                        </tr>
                    </thead>
                    <tbody id="overallLeaderboard">
                        <!-- Scores will be added here -->
                    </tbody>
                </table>
            </div>

            <!-- Category Grid -->
            <div class="category-grid">
                <!-- Hiring -->
                <div class="category-section">
                    <div class="category-header">
                        <h3>
                            <span class="category-icon">üë•</span>
                            Hiring
                        </h3>
                    </div>
                    <table class="category-table">
                        <thead>
                            <tr>
                                <th>Rank</th>
                                <th>Player</th>
                                <th>Score</th>
                                <th>Time</th>
                            </tr>
                        </thead>
                        <tbody id="hiringLeaderboard">
                            <!-- Scores will be added here -->
                        </tbody>
                    </table>
                </div>

                <!-- Wage & Hour -->
                <div class="category-section">
                    <div class="category-header">
                        <h3>
                            <span class="category-icon">üí∞</span>
                            Wage & Hour
                        </h3>
                    </div>
                    <table class="category-table">
                        <thead>
                            <tr>
                                <th>Rank</th>
                                <th>Player</th>
                                <th>Score</th>
                                <th>Time</th>
                            </tr>
                        </thead>
                        <tbody id="wageLeaderboard">
                            <!-- Scores will be added here -->
                        </tbody>
                    </table>
                </div>

                <!-- Performance Management -->
                <div class="category-section">
                    <div class="category-header">
                        <h3>
                            <span class="category-icon">üìä</span>
                            Performance Management
                        </h3>
                    </div>
                    <table class="category-table">
                        <thead>
                            <tr>
                                <th>Rank</th>
                                <th>Player</th>
                                <th>Score</th>
                                <th>Time</th>
                            </tr>
                        </thead>
                        <tbody id="performanceLeaderboard">
                            <!-- Scores will be added here -->
                        </tbody>
                    </table>
                </div>

                <!-- Terminations -->
                <div class="category-section">
                    <div class="category-header">
                        <h3>
                            <span class="category-icon">üìù</span>
                            Terminations
                        </h3>
                    </div>
                    <table class="category-table">
                        <thead>
                            <tr>
                                <th>Rank</th>
                                <th>Player</th>
                                <th>Score</th>
                                <th>Time</th>
                            </tr>
                        </thead>
                        <tbody id="terminationsLeaderboard">
                            <!-- Scores will be added here -->
                        </tbody>
                    </table>
                </div>

                <!-- Common Claims -->
                <div class="category-section">
                    <div class="category-header">
                        <h3>
                            <span class="category-icon">‚öñÔ∏è</span>
                            Common Claims
                        </h3>
                    </div>
                    <table class="category-table">
                        <thead>
                            <tr>
                                <th>Rank</th>
                                <th>Player</th>
                                <th>Score</th>
                                <th>Time</th>
                            </tr>
                        </thead>
                        <tbody id="claimsLeaderboard">
                            <!-- Scores will be added here -->
                        </tbody>
                    </table>
                </div>

                <!-- Key Policies -->
                <div class="category-section">
                    <div class="category-header">
                        <h3>
                            <span class="category-icon">üìú</span>
                            Key Policies
                        </h3>
                    </div>
                    <table class="category-table">
                        <thead>
                            <tr>
                                <th>Rank</th>
                                <th>Player</th>
                                <th>Score</th>
                                <th>Time</th>
                            </tr>
                        </thead>
                        <tbody id="policiesLeaderboard">
                            <!-- Scores will be added here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script>
        // JSONBin.io configuration
        const JSONBIN_BIN_ID = '6831ed698960c979a5a09182';
        const JSONBIN_API_KEY = '$2a$10$az3EVReenqC2VS1Obky5Cuph1T2/9Md5SJf2jT7k12EGB8FebuuKS';
        const JSONBIN_API_URL = 'https://api.jsonbin.io/v3/b';

        // [Rest of the JavaScript code remains the same]
        // Initialize or load scores
        async function initializeScores() {
            try {
                const response = await fetch(`${JSONBIN_API_URL}/${JSONBIN_BIN_ID}/latest`, {
                    headers: {
                        'X-Master-Key': JSONBIN_API_KEY
                    }
                });
                
                if (!response.ok) {
                    throw new Error('Failed to fetch scores');
                }
                
                const data = await response.json();
                return data.record;
            } catch (error) {
                console.error('Error loading scores:', error);
                // Fallback to empty scores if API call fails
                return {
                    overall: [],
                    hiring: [],
                    wage: [],
                    performance: [],
                    terminations: [],
                    claims: [],
                    policies: []
                };
            }
        }

        // [Rest of the JavaScript functions remain the same]
        
        // Initial update of leaderboards
        updateLeaderboards();
        
        // Auto-refresh leaderboard every 30 seconds
        setInterval(updateLeaderboards, 30000);
    </script>
</body>
</html>